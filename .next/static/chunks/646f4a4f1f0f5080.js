(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,842727,e=>{"use strict";var t=e.i(271645),a=e.i(981140),r=e.i(75830),s=e.i(820783),l=e.i(30030),n=e.i(610772),i=e.i(248425),o=e.i(30207),c=e.i(369340),d=e.i(586318),u=e.i(843476),m="rovingFocusGroup.onEntryFocus",h={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[f,x,y]=(0,r.createCollection)(p),[v,g]=(0,l.createContextScope)(p,[y]),[j,b]=v(p),w=t.forwardRef((e,t)=>(0,u.jsx)(f.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(f.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(N,{...e,ref:t})})}));w.displayName=p;var N=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:l,orientation:n,loop:f=!1,dir:y,currentTabStopId:v,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:b,onEntryFocus:w,preventScrollOnEntryFocus:N=!1,...C}=e,k=t.useRef(null),A=(0,s.useComposedRefs)(r,k),F=(0,d.useDirection)(y),[T,S]=(0,c.useControllableState)({prop:v,defaultProp:g??null,onChange:b,caller:p}),[E,M]=t.useState(!1),I=(0,o.useCallbackRef)(w),_=x(l),P=t.useRef(!1),[R,L]=t.useState(0);return t.useEffect(()=>{let e=k.current;if(e)return e.addEventListener(m,I),()=>e.removeEventListener(m,I)},[I]),(0,u.jsx)(j,{scope:l,orientation:n,dir:F,loop:f,currentTabStopId:T,onItemFocus:t.useCallback(e=>S(e),[S]),onItemShiftTab:t.useCallback(()=>M(!0),[]),onFocusableItemAdd:t.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>L(e=>e-1),[]),children:(0,u.jsx)(i.Primitive.div,{tabIndex:E||0===R?-1:0,"data-orientation":n,...C,ref:A,style:{outline:"none",...e.style},onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,a.composeEventHandlers)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(m,h);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=_().filter(e=>e.focusable);D([e.find(e=>e.active),e.find(e=>e.id===T),...e].filter(Boolean).map(e=>e.ref.current),N)}}P.current=!1}),onBlur:(0,a.composeEventHandlers)(e.onBlur,()=>M(!1))})})}),C="RovingFocusGroupItem",k=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,focusable:l=!0,active:o=!1,tabStopId:c,children:d,...m}=e,h=(0,n.useId)(),p=c||h,y=b(C,s),v=y.currentTabStopId===p,g=x(s),{onFocusableItemAdd:j,onFocusableItemRemove:w,currentTabStopId:N}=y;return t.useEffect(()=>{if(l)return j(),()=>w()},[l,j,w]),(0,u.jsx)(f.ItemSlot,{scope:s,id:p,focusable:l,active:o,children:(0,u.jsx)(i.Primitive.span,{tabIndex:v?0:-1,"data-orientation":y.orientation,...m,ref:r,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{l?y.onItemFocus(p):e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>y.onItemFocus(p)),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void y.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,a){var r;let s=(r=e.key,"rtl"!==a?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return A[s]}(e,y.orientation,y.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=g().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var a,r;"prev"===t&&s.reverse();let l=s.indexOf(e.currentTarget);s=y.loop?(a=s,r=l+1,a.map((e,t)=>a[(r+t)%a.length])):s.slice(l+1)}setTimeout(()=>D(s))}}),children:"function"==typeof d?d({isCurrentTabStop:v,hasTabStop:null!=N}):d})})});k.displayName=C;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D(e,t=!1){let a=document.activeElement;for(let r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}e.s(["Item",()=>k,"Root",()=>w,"createRovingFocusGroupScope",()=>g])},970065,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>l])},717521,e=>{"use strict";let t=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},531278,e=>{"use strict";var t=e.i(717521);e.s(["Loader2",()=>t.default])},361653,e=>{"use strict";let t=(0,e.i(475254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},63209,e=>{"use strict";var t=e.i(361653);e.s(["AlertCircle",()=>t.default])},603908,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>t])},107233,e=>{"use strict";var t=e.i(603908);e.s(["Plus",()=>t.default])},781947,e=>{"use strict";var t=e.i(843476),a=e.i(225913),r=e.i(647163);let s=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,...l}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(s({variant:a}),e),...l})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}e.s(["Alert",()=>l,"AlertDescription",()=>i,"AlertTitle",()=>n])},612329,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},643531,e=>{"use strict";var t=e.i(678745);e.s(["Check",()=>t.default])},247978,e=>{"use strict";let t=(0,e.i(475254).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["default",()=>t])},561659,e=>{"use strict";var t=e.i(247978);e.s(["CreditCard",()=>t.default])},353052,e=>{"use strict";let t=(0,e.i(475254).default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["default",()=>t])},187378,e=>{"use strict";var t=e.i(353052);e.s(["Banknote",()=>t.default])},557322,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(167881),s=e.i(970065),l=e.i(630374),n=e.i(23750),i=e.i(10708),o=e.i(781947),c=e.i(994179),d=e.i(463415),u=e.i(62870),m=e.i(531278),h=e.i(107233),p=e.i(323585),f=e.i(561659),x=e.i(187378),y=e.i(252754),v=e.i(63209),g=e.i(727612),j=e.i(643531);function b(){let[e,b]=(0,a.useState)([]),[w,N]=(0,a.useState)(!0),[C,k]=(0,a.useState)(""),[A,D]=(0,a.useState)(!1),[F,T]=(0,a.useState)(!1),[S,E]=(0,a.useState)({type:"card",label:"",cardNumber:"",accountNumber:"",accountName:"",walletAddress:""}),M=async()=>{try{N(!0);let e=await fetch("/api/payments/methods",{method:"GET"});if(!e.ok)throw Error("Failed to load payment methods");let t=await e.json();b(t.methods||[])}catch(e){k("Failed to load payment methods"),console.error(e)}finally{N(!1)}};(0,a.useEffect)(()=>{M()},[]);let I=async e=>{if(e.preventDefault(),!S.label)return void k("Please enter a label for this payment method");T(!0),k("");try{let e={type:S.type,label:S.label};if("card"===S.type&&S.cardNumber?e.last_four=S.cardNumber.slice(-4):"bank"===S.type&&S.accountNumber?(e.last_four=S.accountNumber.slice(-4),e.metadata={account_name:S.accountName}):("crypto_wallet"===S.type||"crypto"===S.type)&&S.walletAddress&&(e.last_four=S.walletAddress.slice(-4)),!(await fetch("/api/payments/methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to add payment method");await M(),D(!1),E({type:"card",label:"",cardNumber:"",accountNumber:"",accountName:"",walletAddress:""})}catch(e){k("Failed to add payment method"),console.error(e)}finally{T(!1)}},_=async e=>{if(confirm("Are you sure you want to delete this payment method?"))try{if(!(await fetch(`/api/payments/methods?id=${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete payment method");await M()}catch(e){k("Failed to delete payment method"),console.error(e)}},P=async e=>{try{if(!(await fetch("/api/payments/methods",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,is_default:!0})})).ok)throw Error("Failed to set default payment method");await M()}catch(e){k("Failed to set default payment method"),console.error(e)}},R=e=>{switch(e){case"card":return"Credit/Debit Card";case"bank":return"Bank Transfer";case"crypto_wallet":return"Crypto Wallet";default:return e}};return(0,t.jsxs)("div",{className:"space-y-6",children:[C&&(0,t.jsxs)(o.Alert,{variant:"destructive",children:[(0,t.jsx)(v.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(o.AlertDescription,{children:C})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Payment Methods"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods"})]}),(0,t.jsxs)(l.Dialog,{open:A,onOpenChange:D,children:[(0,t.jsx)(l.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{className:"gap-2",children:[(0,t.jsx)(h.Plus,{className:"h-4 w-4"}),"Add Payment Method"]})}),(0,t.jsxs)(l.DialogContent,{children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:"Add Payment Method"}),(0,t.jsx)(l.DialogDescription,{children:"Add a new payment method to your account"})]}),(0,t.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"method-type",children:"Payment Type"}),(0,t.jsxs)(u.Select,{value:S.type,onValueChange:e=>E({...S,type:e}),children:[(0,t.jsx)(u.SelectTrigger,{id:"method-type",children:(0,t.jsx)(u.SelectValue,{})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"card",children:"Credit/Debit Card"}),(0,t.jsx)(u.SelectItem,{value:"bank",children:"Bank Transfer"}),(0,t.jsx)(u.SelectItem,{value:"crypto_wallet",children:"Crypto Wallet"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"label",children:"Label (e.g., My Visa)"}),(0,t.jsx)(n.Input,{id:"label",placeholder:"Enter a label for this payment method",value:S.label,onChange:e=>E({...S,label:e.target.value})})]}),"card"===S.type&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"card-number",children:"Card Number"}),(0,t.jsx)(n.Input,{id:"card-number",placeholder:"4111 1111 1111 1111",value:S.cardNumber,onChange:e=>E({...S,cardNumber:e.target.value})})]}),"bank"===S.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"account-name",children:"Account Name"}),(0,t.jsx)(n.Input,{id:"account-name",placeholder:"Enter account name",value:S.accountName,onChange:e=>E({...S,accountName:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"account-number",children:"Account Number"}),(0,t.jsx)(n.Input,{id:"account-number",placeholder:"Enter account number",value:S.accountNumber,onChange:e=>E({...S,accountNumber:e.target.value})})]})]}),("crypto_wallet"===S.type||"crypto"===S.type)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"wallet-address",children:"Wallet Address"}),(0,t.jsx)(n.Input,{id:"wallet-address",placeholder:"0x...",value:S.walletAddress,onChange:e=>E({...S,walletAddress:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>D(!1),disabled:F,children:"Cancel"}),(0,t.jsx)(r.Button,{type:"submit",className:"flex-1",disabled:F,children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"h-4 w-4 animate-spin mr-2"}),"Adding..."]}):"Add Method"})]})]})]})]})]}),w?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})}):e.length>0?(0,t.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(e=>{switch(e){case"card":return(0,t.jsx)(f.CreditCard,{className:"h-4 w-4"});case"bank":return(0,t.jsx)(x.Banknote,{className:"h-4 w-4"});case"crypto_wallet":return(0,t.jsx)(y.Wallet,{className:"h-4 w-4"});default:return null}})(e.type)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:e.label||R(e.type)}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[R(e.type),e.last_four&&` ending in ${e.last_four}`]})]}),e.is_default&&(0,t.jsxs)(c.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(j.Check,{className:"h-3 w-3"}),"Default"]})]}),(0,t.jsxs)(d.DropdownMenu,{children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(p.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",children:[!e.is_default&&(0,t.jsxs)(d.DropdownMenuItem,{onClick:()=>P(e.id),children:[(0,t.jsx)(j.Check,{className:"h-4 w-4 mr-2"}),"Set as Default"]}),(0,t.jsxs)(d.DropdownMenuItem,{onClick:()=>_(e.id),className:"text-destructive",children:[(0,t.jsx)(g.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},e.id))}):(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-8 text-center",children:[(0,t.jsx)(y.Wallet,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No payment methods added yet"}),(0,t.jsx)(r.Button,{variant:"outline",className:"mt-4",onClick:()=>D(!0),children:"Add Your First Payment Method"})]})})]})}e.s(["PaymentMethodsManager",()=>b])}]);