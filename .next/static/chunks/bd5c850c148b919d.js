(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i])},994179,e=>{"use strict";var t=e.i(843476),r=e.i(991918),a=e.i(225913),s=e.i(647163);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...d}){let o=n?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,s.cn)(i({variant:a}),e),...d})}e.s(["Badge",()=>n])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},269638,e=>{"use strict";var t=e.i(406321);e.s(["CheckCircle",()=>t.default])},180127,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},717521,e=>{"use strict";let t=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},531278,e=>{"use strict";var t=e.i(717521);e.s(["Loader2",()=>t.default])},184762,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},319036,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(981140),s=e.i(820783),i=e.i(30030),n=e.i(369340),d=e.i(999682),o=e.i(635804),l=e.i(248425),c="Switch",[u,m]=(0,i.createContextScope)(c),[x,h]=u(c),p=r.forwardRef((e,i)=>{let{__scopeSwitch:d,name:o,checked:u,defaultChecked:m,required:h,disabled:p,value:b="on",onCheckedChange:g,form:j,...y}=e,[w,C]=r.useState(null),k=(0,s.useComposedRefs)(i,e=>C(e)),N=r.useRef(!1),S=!w||j||!!w.closest("form"),[_,R]=(0,n.useControllableState)({prop:u,defaultProp:m??!1,onChange:g,caller:c});return(0,t.jsxs)(x,{scope:d,checked:_,disabled:p,children:[(0,t.jsx)(l.Primitive.button,{type:"button",role:"switch","aria-checked":_,"aria-required":h,"data-state":v(_),"data-disabled":p?"":void 0,disabled:p,value:b,...y,ref:k,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{R(e=>!e),S&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),S&&(0,t.jsx)(f,{control:w,bubbles:!N.current,name:o,value:b,checked:_,required:h,disabled:p,form:j,style:{transform:"translateX(-100%)"}})]})});p.displayName=c;var b="SwitchThumb",g=r.forwardRef((e,r)=>{let{__scopeSwitch:a,...s}=e,i=h(b,a);return(0,t.jsx)(l.Primitive.span,{"data-state":v(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:r})});g.displayName=b;var f=r.forwardRef(({__scopeSwitch:e,control:a,checked:i,bubbles:n=!0,...l},c)=>{let u=r.useRef(null),m=(0,s.useComposedRefs)(u,c),x=(0,d.usePrevious)(i),h=(0,o.useSize)(a);return r.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(x!==i&&t){let r=new Event("click",{bubbles:n});t.call(e,i),e.dispatchEvent(r)}},[x,i,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...l,tabIndex:-1,ref:m,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(e){return e?"checked":"unchecked"}f.displayName="SwitchBubbleInput";var j=e.i(647163);function y({className:e,...r}){return(0,t.jsx)(p,{"data-slot":"switch",className:(0,j.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>y],319036)},947767,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(167881),s=e.i(23750),i=e.i(10708),n=e.i(184762),d=e.i(970065),o=e.i(62870),l=e.i(319036),c=e.i(994179),u=e.i(871689),m=e.i(761911),x=e.i(531278),h=e.i(269638),p=e.i(37727),b=e.i(522016),g=e.i(920755),f=e.i(618566);function v(){let[e,v]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[w,C]=(0,r.useState)(""),[k,N]=(0,r.useState)({name:"",description:"",room_type:"project",is_public:!0,max_members:"10",tags:[]}),S=(0,f.useRouter)(),_=()=>{w.trim()&&!k.tags.includes(w.trim())&&(N({...k,tags:[...k.tags,w.trim()]}),C(""))},R=async e=>{e.preventDefault(),v(!0);let t=(0,g.createClient)(),{data:{user:r}}=await t.auth.getUser();if(!r)return void S.push("/auth/sign-in");let{data:a,error:s}=await t.from("collaboration_rooms").insert({name:k.name,description:k.description,owner_id:r.id,room_type:k.room_type,is_public:k.is_public,max_members:Number.parseInt(k.max_members),tags:k.tags}).select().single();!s&&a&&(await t.from("room_members").insert({room_id:a.id,user_id:r.id,role:"owner"}),y(!0),setTimeout(()=>S.push(`/community/collaboration/${a.id}`),2e3)),v(!1)};return j?(0,t.jsx)("div",{className:"min-h-[60vh] flex items-center justify-center",children:(0,t.jsx)(d.Card,{className:"max-w-md w-full text-center",children:(0,t.jsxs)(d.CardContent,{className:"pt-12 pb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(h.CheckCircle,{className:"h-8 w-8 text-green-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Room Created!"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Redirecting to your room..."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(b.default,{href:"/community/collaboration",className:"text-sm text-muted-foreground hover:text-primary flex items-center gap-1",children:[(0,t.jsx)(u.ArrowLeft,{className:"h-4 w-4"}),"Back to Collaboration"]})}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{children:[(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Users,{className:"h-5 w-5"}),"Create Collaboration Room"]}),(0,t.jsx)(d.CardDescription,{children:"Set up a space for your team or community to work together"})]}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"name",children:"Room Name *"}),(0,t.jsx)(s.Input,{id:"name",placeholder:"e.g., Web Dev Study Group",value:k.name,onChange:e=>N({...k,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(n.Textarea,{id:"description",placeholder:"What is this room about?",rows:3,value:k.description,onChange:e=>N({...k,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Room Type"}),(0,t.jsxs)(o.Select,{value:k.room_type,onValueChange:e=>N({...k,room_type:e}),children:[(0,t.jsx)(o.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"project",children:"Project Collaboration"}),(0,t.jsx)(o.SelectItem,{value:"study",children:"Study Group"}),(0,t.jsx)(o.SelectItem,{value:"brainstorm",children:"Brainstorming"}),(0,t.jsx)(o.SelectItem,{value:"support",children:"Peer Support"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Max Members"}),(0,t.jsxs)(o.Select,{value:k.max_members,onValueChange:e=>N({...k,max_members:e}),children:[(0,t.jsx)(o.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"5",children:"5 members"}),(0,t.jsx)(o.SelectItem,{value:"10",children:"10 members"}),(0,t.jsx)(o.SelectItem,{value:"25",children:"25 members"}),(0,t.jsx)(o.SelectItem,{value:"50",children:"50 members"}),(0,t.jsx)(o.SelectItem,{value:"100",children:"100 members"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Public Room"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Anyone can find and join this room"})]}),(0,t.jsx)(l.Switch,{checked:k.is_public,onCheckedChange:e=>N({...k,is_public:e})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Tags"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)(s.Input,{placeholder:"Add a tag",value:w,onChange:e=>C(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),_())}),(0,t.jsx)(a.Button,{type:"button",onClick:_,variant:"secondary",children:"Add"})]}),k.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:k.tags.map(e=>(0,t.jsxs)(c.Badge,{variant:"secondary",className:"gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>{N({...k,tags:k.tags.filter(t=>t!==e)})},className:"hover:text-destructive",children:(0,t.jsx)(p.X,{className:"h-3 w-3"})})]},e))})]}),(0,t.jsxs)(a.Button,{type:"submit",className:"w-full",disabled:e||!k.name,children:[e&&(0,t.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Creating...":"Create Room"]})]})})]})]})}e.s(["default",()=>v])}]);