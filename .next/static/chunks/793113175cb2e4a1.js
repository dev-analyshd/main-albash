(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(843476),s=e.i(647163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function r({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function a({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...i})}function l({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...i})}function n({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>n,"CardDescription",()=>l,"CardHeader",()=>r,"CardTitle",()=>a])},717521,e=>{"use strict";let t=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},531278,e=>{"use strict";var t=e.i(717521);e.s(["Loader2",()=>t.default])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},269638,e=>{"use strict";var t=e.i(406321);e.s(["CheckCircle",()=>t.default])},180127,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},103802,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(167881),r=e.i(23750),a=e.i(10708),l=e.i(970065),n=e.i(62870),c=e.i(871689),d=e.i(155274),u=e.i(531278),o=e.i(269638),m=e.i(522016),x=e.i(920755),h=e.i(618566);function g(){let[e,g]=(0,s.useState)([]),[j,p]=(0,s.useState)(!0),[v,f]=(0,s.useState)(!1),[b,C]=(0,s.useState)(!1),[S,N]=(0,s.useState)({listing_id:"",starting_price:"",reserve_price:"",bid_increment:"1",duration:"7"}),_=(0,h.useRouter)(),y=(0,x.createClient)();(0,s.useEffect)(()=>{!async function(){let{data:{user:e}}=await y.auth.getUser();if(e){let{data:t}=await y.from("listings").select("id, title, images").eq("seller_id",e.id).eq("status","active");g(t||[])}p(!1)}()},[y]);let w=async e=>{e.preventDefault(),f(!0);let{data:{user:t}}=await y.auth.getUser();if(!t)return;let s=new Date,i=new Date(s.getTime()+24*Number.parseInt(S.duration)*36e5),{error:r}=await y.from("auctions").insert({listing_id:S.listing_id,seller_id:t.id,starting_price:Number.parseFloat(S.starting_price),reserve_price:S.reserve_price?Number.parseFloat(S.reserve_price):null,bid_increment:Number.parseFloat(S.bid_increment),start_time:s.toISOString(),end_time:i.toISOString(),status:"active"});r||(C(!0),setTimeout(()=>_.push("/marketplace/auctions"),2e3)),f(!1)};return b?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsx)(l.Card,{className:"max-w-md w-full text-center",children:(0,t.jsxs)(l.CardContent,{className:"pt-12 pb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(o.CheckCircle,{className:"h-8 w-8 text-green-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Auction Created!"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Redirecting to auctions page..."})]})})}):(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(m.default,{href:"/dashboard",className:"text-sm text-muted-foreground hover:text-primary flex items-center gap-1",children:[(0,t.jsx)(c.ArrowLeft,{className:"h-4 w-4"}),"Back to Dashboard"]})}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Gavel,{className:"h-5 w-5"}),"Create Auction"]}),(0,t.jsx)(l.CardDescription,{children:"Set up an auction for one of your listings"})]}),(0,t.jsx)(l.CardContent,{children:j?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading your listings..."})]}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(d.Gavel,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"No Listings Available"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create a listing first before starting an auction"}),(0,t.jsx)(m.default,{href:"/dashboard/listings/new",children:(0,t.jsx)(i.Button,{children:"Create Listing"})})]}):(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"listing",children:"Select Listing *"}),(0,t.jsxs)(n.Select,{value:S.listing_id,onValueChange:e=>N({...S,listing_id:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(n.SelectValue,{placeholder:"Choose a listing"})}),(0,t.jsx)(n.SelectContent,{children:e.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id,children:e.title},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"starting_price",children:"Starting Price ($) *"}),(0,t.jsx)(r.Input,{id:"starting_price",type:"number",min:"0",step:"0.01",value:S.starting_price,onChange:e=>N({...S,starting_price:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"reserve_price",children:"Reserve Price ($)"}),(0,t.jsx)(r.Input,{id:"reserve_price",type:"number",min:"0",step:"0.01",value:S.reserve_price,onChange:e=>N({...S,reserve_price:e.target.value}),placeholder:"Optional"})]})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"bid_increment",children:"Bid Increment ($)"}),(0,t.jsxs)(n.Select,{value:S.bid_increment,onValueChange:e=>N({...S,bid_increment:e}),children:[(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"1",children:"$1.00"}),(0,t.jsx)(n.SelectItem,{value:"5",children:"$5.00"}),(0,t.jsx)(n.SelectItem,{value:"10",children:"$10.00"}),(0,t.jsx)(n.SelectItem,{value:"25",children:"$25.00"}),(0,t.jsx)(n.SelectItem,{value:"50",children:"$50.00"}),(0,t.jsx)(n.SelectItem,{value:"100",children:"$100.00"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"duration",children:"Duration"}),(0,t.jsxs)(n.Select,{value:S.duration,onValueChange:e=>N({...S,duration:e}),children:[(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"1",children:"1 Day"}),(0,t.jsx)(n.SelectItem,{value:"3",children:"3 Days"}),(0,t.jsx)(n.SelectItem,{value:"5",children:"5 Days"}),(0,t.jsx)(n.SelectItem,{value:"7",children:"7 Days"}),(0,t.jsx)(n.SelectItem,{value:"14",children:"14 Days"}),(0,t.jsx)(n.SelectItem,{value:"30",children:"30 Days"})]})]})]})]}),(0,t.jsxs)(i.Button,{type:"submit",className:"w-full",disabled:v||!S.listing_id,children:[v&&(0,t.jsx)(u.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),v?"Creating...":"Create Auction"]})]})})]})]})}e.s(["default",()=>g])}]);