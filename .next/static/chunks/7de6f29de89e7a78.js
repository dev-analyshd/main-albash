(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,842727,e=>{"use strict";var t=e.i(271645),s=e.i(981140),a=e.i(75830),l=e.i(820783),r=e.i(30030),n=e.i(610772),i=e.i(248425),c=e.i(30207),o=e.i(369340),d=e.i(586318),u=e.i(843476),x="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[m,f,j]=(0,a.createCollection)(h),[g,v]=(0,r.createContextScope)(h,[j]),[b,y]=g(h),w=t.forwardRef((e,t)=>(0,u.jsx)(m.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(m.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(C,{...e,ref:t})})}));w.displayName=h;var C=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:m=!1,dir:j,currentTabStopId:g,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:C=!1,...N}=e,T=t.useRef(null),S=(0,l.useComposedRefs)(a,T),D=(0,d.useDirection)(j),[I,A]=(0,o.useControllableState)({prop:g,defaultProp:v??null,onChange:y,caller:h}),[R,M]=t.useState(!1),H=(0,c.useCallbackRef)(w),E=f(r),F=t.useRef(!1),[L,P]=t.useState(0);return t.useEffect(()=>{let e=T.current;if(e)return e.addEventListener(x,H),()=>e.removeEventListener(x,H)},[H]),(0,u.jsx)(b,{scope:r,orientation:n,dir:D,loop:m,currentTabStopId:I,onItemFocus:t.useCallback(e=>A(e),[A]),onItemShiftTab:t.useCallback(()=>M(!0),[]),onFocusableItemAdd:t.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>P(e=>e-1),[]),children:(0,u.jsx)(i.Primitive.div,{tabIndex:R||0===L?-1:0,"data-orientation":n,...N,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,()=>{F.current=!0}),onFocus:(0,s.composeEventHandlers)(e.onFocus,e=>{let t=!F.current;if(e.target===e.currentTarget&&t&&!R){let t=new CustomEvent(x,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=E().filter(e=>e.focusable);k([e.find(e=>e.active),e.find(e=>e.id===I),...e].filter(Boolean).map(e=>e.ref.current),C)}}F.current=!1}),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>M(!1))})})}),N="RovingFocusGroupItem",T=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:l,focusable:r=!0,active:c=!1,tabStopId:o,children:d,...x}=e,p=(0,n.useId)(),h=o||p,j=y(N,l),g=j.currentTabStopId===h,v=f(l),{onFocusableItemAdd:b,onFocusableItemRemove:w,currentTabStopId:C}=j;return t.useEffect(()=>{if(r)return b(),()=>w()},[r,b,w]),(0,u.jsx)(m.ItemSlot,{scope:l,id:h,focusable:r,active:c,children:(0,u.jsx)(i.Primitive.span,{tabIndex:g?0:-1,"data-orientation":j.orientation,...x,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{r?j.onItemFocus(h):e.preventDefault()}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>j.onItemFocus(h)),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void j.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,s){var a;let l=(a=e.key,"rtl"!==s?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(l))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(l)))return S[l]}(e,j.orientation,j.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let l=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)l.reverse();else if("prev"===t||"next"===t){var s,a;"prev"===t&&l.reverse();let r=l.indexOf(e.currentTarget);l=j.loop?(s=l,a=r+1,s.map((e,t)=>s[(a+t)%s.length])):l.slice(r+1)}setTimeout(()=>k(l))}}),children:"function"==typeof d?d({isCurrentTabStop:g,hasTabStop:null!=C}):d})})});T.displayName=N;var S={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k(e,t=!1){let s=document.activeElement;for(let a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}e.s(["Item",()=>T,"Root",()=>w,"createRovingFocusGroupScope",()=>v])},269638,e=>{"use strict";var t=e.i(406321);e.s(["CheckCircle",()=>t.default])},970065,e=>{"use strict";var t=e.i(843476),s=e.i(647163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>r])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},947627,e=>{"use strict";var t=e.i(843476),s=e.i(647163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})})}function l({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",e),...a})}function r({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a})}function n({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function i({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function c({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n])},484023,e=>{"use strict";let t=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["default",()=>t])},440160,e=>{"use strict";var t=e.i(484023);e.s(["Download",()=>t.default])},798031,e=>{"use strict";let t=(0,e.i(475254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["default",()=>t])},373884,e=>{"use strict";var t=e.i(798031);e.s(["XCircle",()=>t.default])},612329,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},187942,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},286536,e=>{"use strict";var t=e.i(187942);e.s(["Eye",()=>t.default])},582458,e=>{"use strict";let t=(0,e.i(475254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>t])},878894,e=>{"use strict";var t=e.i(582458);e.s(["AlertTriangle",()=>t.default])},9723,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(846932),l=e.i(555436),r=e.i(323585),n=e.i(286536),i=e.i(727612),c=e.i(269638),o=e.i(373884),d=e.i(878894),u=e.i(440160),x=e.i(970065),p=e.i(167881),h=e.i(23750),m=e.i(994179),f=e.i(62870),j=e.i(463415),g=e.i(630374),v=e.i(947627),b=e.i(920755),y=e.i(618566),w=e.i(522016);function C({listings:e}){let C=(0,y.useRouter)(),N=(0,b.createClient)(),[T,S]=(0,s.useState)(e),[k,D]=(0,s.useState)(""),[I,A]=(0,s.useState)("all"),[R,M]=(0,s.useState)("all"),[H,E]=(0,s.useState)(null),[F,L]=(0,s.useState)(!1),P=T.filter(e=>{let t=e.title?.toLowerCase().includes(k.toLowerCase())||e.profiles?.full_name?.toLowerCase().includes(k.toLowerCase()),s="all"===I||e.status===I,a="all"===R||e.listing_type===R;return t&&s&&a}),B=async(e,t)=>{L(!0);try{switch(e){case"approve":await N.from("listings").update({status:"active"}).eq("id",t.id),S(T.map(e=>e.id===t.id?{...e,status:"active"}:e));break;case"reject":await N.from("listings").update({status:"rejected"}).eq("id",t.id),S(T.map(e=>e.id===t.id?{...e,status:"rejected"}:e));break;case"suspend":await N.from("listings").update({status:"suspended"}).eq("id",t.id),S(T.map(e=>e.id===t.id?{...e,status:"suspended"}:e));break;case"delete":await N.from("listings").delete().eq("id",t.id),S(T.filter(e=>e.id!==t.id))}C.refresh()}catch(e){console.error("Error performing action:",e)}finally{L(!1),E(null)}},_={total:T.length,active:T.filter(e=>"active"===e.status).length,pending:T.filter(e=>"pending"===e.status).length,suspended:T.filter(e=>"suspended"===e.status).length},z={active:"bg-green-500/10 text-green-600",pending:"bg-yellow-500/10 text-yellow-600",draft:"bg-gray-500/10 text-gray-600",suspended:"bg-red-500/10 text-red-600",rejected:"bg-red-500/10 text-red-600"};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Listing Management"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Review and manage platform listings"})]}),(0,t.jsxs)(p.Button,{variant:"outline",className:"gap-2 bg-transparent",children:[(0,t.jsx)(u.Download,{className:"h-4 w-4"}),"Export"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4",children:[(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Listings"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:_.total})]})}),(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:_.active})]})}),(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Review"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:_.pending})]})}),(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Suspended"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:_.suspended})]})})]}),(0,t.jsx)(x.Card,{children:(0,t.jsx)(x.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(h.Input,{placeholder:"Search listings...",className:"pl-10",value:k,onChange:e=>D(e.target.value)})]}),(0,t.jsxs)(f.Select,{value:I,onValueChange:A,children:[(0,t.jsx)(f.SelectTrigger,{className:"w-40",children:(0,t.jsx)(f.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(f.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(f.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(f.SelectItem,{value:"draft",children:"Draft"}),(0,t.jsx)(f.SelectItem,{value:"suspended",children:"Suspended"})]})]}),(0,t.jsxs)(f.Select,{value:R,onValueChange:M,children:[(0,t.jsx)(f.SelectTrigger,{className:"w-40",children:(0,t.jsx)(f.SelectValue,{placeholder:"Type"})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"all",children:"All Types"}),(0,t.jsx)(f.SelectItem,{value:"service",children:"Service"}),(0,t.jsx)(f.SelectItem,{value:"product",children:"Product"}),(0,t.jsx)(f.SelectItem,{value:"project",children:"Project"}),(0,t.jsx)(f.SelectItem,{value:"tool",children:"Tool"})]})]})]})})}),(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-0",children:[(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{children:[(0,t.jsx)(v.TableHead,{children:"Listing"}),(0,t.jsx)(v.TableHead,{children:"Owner"}),(0,t.jsx)(v.TableHead,{children:"Category"}),(0,t.jsx)(v.TableHead,{children:"Type"}),(0,t.jsx)(v.TableHead,{children:"Price"}),(0,t.jsx)(v.TableHead,{children:"Status"}),(0,t.jsx)(v.TableHead,{children:"Created"}),(0,t.jsx)(v.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(v.TableBody,{children:P.map((e,s)=>(0,t.jsxs)(a.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.02*s},className:"group",children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"max-w-xs",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:[e.description?.slice(0,50),"..."]})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.profiles?.full_name||"Unknown"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.profiles?.email})]})}),(0,t.jsx)(v.TableCell,{children:e.categories?.name||"Uncategorized"}),(0,t.jsx)(v.TableCell,{className:"capitalize",children:e.listing_type||"service"}),(0,t.jsxs)(v.TableCell,{children:["$",e.price||0]}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)(m.Badge,{className:z[e.status]||"bg-gray-100",children:e.status})}),(0,t.jsx)(v.TableCell,{className:"text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsxs)(j.DropdownMenu,{children:[(0,t.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:(0,t.jsx)(r.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(j.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(j.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(j.DropdownMenuSeparator,{}),(0,t.jsx)(w.default,{href:`/marketplace/listing/${e.id}`,children:(0,t.jsxs)(j.DropdownMenuItem,{children:[(0,t.jsx)(n.Eye,{className:"h-4 w-4 mr-2"}),"View Listing"]})}),"pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>E({type:"approve",listing:e}),children:[(0,t.jsx)(c.CheckCircle,{className:"h-4 w-4 mr-2 text-green-600"}),"Approve"]}),(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>E({type:"reject",listing:e}),children:[(0,t.jsx)(o.XCircle,{className:"h-4 w-4 mr-2 text-red-600"}),"Reject"]})]}),"active"===e.status&&(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>E({type:"suspend",listing:e}),children:[(0,t.jsx)(d.AlertTriangle,{className:"h-4 w-4 mr-2 text-yellow-600"}),"Suspend"]}),(0,t.jsx)(j.DropdownMenuSeparator,{}),(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>E({type:"delete",listing:e}),className:"text-destructive",children:[(0,t.jsx)(i.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id))})]}),0===P.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No listings found"})})]})}),(0,t.jsx)(g.Dialog,{open:!!H,onOpenChange:()=>E(null),children:(0,t.jsxs)(g.DialogContent,{children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Confirm Action"}),(0,t.jsxs)(g.DialogDescription,{children:[H?.type==="approve"&&`Approve "${H.listing.title}"?`,H?.type==="reject"&&`Reject "${H.listing.title}"?`,H?.type==="suspend"&&`Suspend "${H.listing.title}"? It will be hidden from the marketplace.`,H?.type==="delete"&&`Permanently delete "${H.listing.title}"? This cannot be undone.`]})]}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(p.Button,{variant:"outline",onClick:()=>E(null),className:"bg-transparent",children:"Cancel"}),(0,t.jsx)(p.Button,{onClick:()=>H&&B(H.type,H.listing),disabled:F,variant:H?.type==="delete"||H?.type==="reject"?"destructive":"default",children:F?"Processing...":"Confirm"})]})]})})]})}e.s(["ListingManagement",()=>C])}]);