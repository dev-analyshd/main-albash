(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},717521,e=>{"use strict";let t=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},531278,e=>{"use strict";var t=e.i(717521);e.s(["Loader2",()=>t.default])},361653,e=>{"use strict";let t=(0,e.i(475254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},63209,e=>{"use strict";var t=e.i(361653);e.s(["AlertCircle",()=>t.default])},781947,e=>{"use strict";var t=e.i(843476),a=e.i(225913),s=e.i(647163);let r=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,...l}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(r({variant:a}),e),...l})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}e.s(["Alert",()=>l,"AlertDescription",()=>d,"AlertTitle",()=>i])},562653,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},425063,e=>{"use strict";var t=e.i(562653);e.s(["ArrowDown",()=>t.default])},483237,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(167881),r=e.i(970065),l=e.i(630374),i=e.i(23750),d=e.i(10708),n=e.i(781947),c=e.i(994179),o=e.i(62870),u=e.i(531278),m=e.i(425063),x=e.i(63209);function h(){let[e,h]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[g,j]=(0,a.useState)(!0),[y,v]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),[b,C]=(0,a.useState)(!1),[S,D]=(0,a.useState)(0),[A,k]=(0,a.useState)({amount:"",paymentMethodId:""}),B=async()=>{try{j(!0);let e=await fetch("/api/payments/withdraw");if(e.ok){let t=await e.json();h(t.withdrawals||[])}let t=await fetch("/api/payments/methods");if(t.ok){let e=await t.json();f(e.methods||[])}let a=await fetch("/api/profile");if(a.ok){let e=await a.json();D(e.wallet_balance||0)}}catch(e){console.error("Failed to load data:",e)}finally{j(!1)}};(0,a.useEffect)(()=>{B()},[]);let F=async e=>{e.preventDefault();let t=parseFloat(A.amount);if(!t||t<=0)return void v("Please enter a valid amount");if(t>S)return void v("Insufficient balance");if(!A.paymentMethodId)return void v("Please select a payment method");C(!0),v("");try{let e=await fetch("/api/payments/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,payment_method_id:A.paymentMethodId})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to request withdrawal")}await B(),N(!1),k({amount:"",paymentMethodId:""})}catch(e){v(e.message||"Failed to request withdrawal"),console.error(e)}finally{C(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[y&&(0,t.jsxs)(n.Alert,{variant:"destructive",children:[(0,t.jsx)(x.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(n.AlertDescription,{children:y})]}),(0,t.jsx)(r.Card,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:(0,t.jsx)(r.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Available Balance"}),(0,t.jsxs)("p",{className:"text-4xl font-bold",children:["$",S.toFixed(2)]})]}),(0,t.jsxs)(l.Dialog,{open:w,onOpenChange:N,children:[(0,t.jsx)(l.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{size:"lg",className:"gap-2",children:[(0,t.jsx)(m.ArrowDown,{className:"h-4 w-4"}),"Request Withdrawal"]})}),(0,t.jsxs)(l.DialogContent,{children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:"Request Withdrawal"}),(0,t.jsx)(l.DialogDescription,{children:"Withdraw funds from your account to your payment method"})]}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"amount",children:"Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-2.5 text-muted-foreground",children:"$"}),(0,t.jsx)(i.Input,{id:"amount",type:"number",placeholder:"0.00",step:"0.01",min:"0",max:S,value:A.amount,onChange:e=>k({...A,amount:e.target.value}),className:"pl-7"})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Max: $",S.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"method",children:"Payment Method"}),(0,t.jsxs)(o.Select,{value:A.paymentMethodId,onValueChange:e=>k({...A,paymentMethodId:e}),children:[(0,t.jsx)(o.SelectTrigger,{id:"method",children:(0,t.jsx)(o.SelectValue,{placeholder:"Select payment method"})}),(0,t.jsx)(o.SelectContent,{children:p.map(e=>(0,t.jsxs)(o.SelectItem,{value:e.id,children:[e.label||e.type," ",e.last_four&&`(****${e.last_four})`]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>N(!1),disabled:b,children:"Cancel"}),(0,t.jsx)(s.Button,{type:"submit",className:"flex-1",disabled:b||0===p.length,children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin mr-2"}),"Requesting..."]}):"Request Withdrawal"})]})]})]})]})]})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Withdrawal History"}),g?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})}):e.length>0?(0,t.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,t.jsx)(r.Card,{children:(0,t.jsxs)(r.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,t.jsx)(m.ArrowDown,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"font-medium",children:["$",e.amount.toFixed(2)," ",e.currency]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]})]}),(e=>{switch(e){case"completed":return(0,t.jsx)(c.Badge,{className:"bg-green-600",children:"Completed"});case"processing":return(0,t.jsx)(c.Badge,{className:"bg-blue-600",children:"Processing"});case"pending":return(0,t.jsx)(c.Badge,{className:"bg-yellow-600",children:"Pending"});case"failed":return(0,t.jsx)(c.Badge,{variant:"destructive",children:"Failed"});default:return(0,t.jsx)(c.Badge,{children:e})}})(e.status)]})},e.id))}):(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"p-8 text-center text-muted-foreground",children:"No withdrawals yet"})})]})]})}function p(){return(0,t.jsxs)("div",{className:"container max-w-4xl py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Request Withdrawal"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Withdraw your earnings to your registered payment method"})]}),(0,t.jsx)(h,{})]})}e.s(["default",()=>p],483237)}]);