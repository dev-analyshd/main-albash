{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ALBASH%20SOLUTION/Downloads/main%20albash/lib/supabase/dev-server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\r\nimport { cookies } from \"next/headers\"\r\n\r\n// For development: create a service-role client that bypasses RLS\r\nexport async function createDevClient() {\r\n  if (process.env.NODE_ENV !== \"development\") {\r\n    throw new Error(\"Dev client only available in development mode\")\r\n  }\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY\r\n\r\n  if (!supabaseUrl || !serviceRoleKey) {\r\n    throw new Error(\"Missing Supabase dev config (NEXT_PUBLIC_SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)\")\r\n  }\r\n\r\n  // Service role key bypasses RLS; use carefully and only in dev\r\n  return createServerClient(supabaseUrl, serviceRoleKey, {\r\n    cookies: {\r\n      getAll() {\r\n        // Cookies not used for service role client\r\n        return []\r\n      },\r\n      setAll() {\r\n        // No-op for service role client\r\n      },\r\n    },\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAIO,eAAe;IACpB;;IAIA,MAAM;IACN,MAAM,iBAAiB,QAAQ,GAAG,CAAC,yBAAyB;IAE5D,IAAI,CAAC,eAAe,CAAC,gBAAgB;QACnC,MAAM,IAAI,MAAM;IAClB;IAEA,+DAA+D;IAC/D,OAAO,IAAA,iMAAkB,EAAC,aAAa,gBAAgB;QACrD,SAAS;YACP;gBACE,2CAA2C;gBAC3C,OAAO,EAAE;YACX;YACA;YACE,gCAAgC;YAClC;QACF;IACF;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ALBASH%20SOLUTION/Downloads/main%20albash/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Supabase environment variables are not set. Please configure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file. \" +\n      \"Get these values from: https://supabase.com/dashboard/project/_/settings/api\"\n    )\n  }\n\n  return createServerClient(supabaseUrl, supabaseAnonKey, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // The \"setAll\" method was called from a Server Component.\n          // This can be ignored if you have proxy refreshing user sessions.\n        }\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,MAAM;IACN,MAAM;IAEN;;IAOA,OAAO,IAAA,iMAAkB,EAAC,aAAa,iBAAiB;QACtD,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,kEAAkE;gBACpE;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ALBASH%20SOLUTION/Downloads/main%20albash/app/api/dashboard/chat/search/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { createDevClient } from \"@/lib/supabase/dev-server\"\r\nimport { createClient } from \"@/lib/supabase/server\"\r\n\r\nexport async function GET(req: Request) {\r\n  const { searchParams } = new URL(req.url)\r\n  const q = searchParams.get(\"q\") || \"\"\r\n\r\n  // Try to use service-role dev client to read auth users (safe in dev)\r\n  try {\r\n    const dev = await createDevClient()\r\n    const usersRes: any = await dev.auth.admin.listUsers({ perPage: 100 })\r\n    const users = usersRes?.data?.users || []\r\n\r\n    const filtered = users\r\n      .filter((u: any) => u.last_sign_in_at) // signed-in users only\r\n      .filter((u: any) => {\r\n        if (!q) return true\r\n        const email = u.email || \"\"\r\n        return (u.user_metadata?.full_name || \"\" ).toLowerCase().includes(q.toLowerCase()) || email.toLowerCase().includes(q.toLowerCase())\r\n      })\r\n      .slice(0, 50)\r\n\r\n    // Map to simple shape; try to include profile info from profiles table\r\n    const results = []\r\n    for (const u of filtered) {\r\n      const { data: profile } = await dev.from(\"profiles\").select(\"id,full_name,avatar_url,email\").eq(\"id\", u.id).single()\r\n      results.push({ id: u.id, email: u.email, full_name: profile?.full_name || u.user_metadata?.full_name || null, avatar_url: profile?.avatar_url || null })\r\n    }\r\n\r\n    return NextResponse.json({ users: results })\r\n  } catch (err) {\r\n    // Fallback: query profiles table (limited suitability without service key)\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data } = await supabase.from(\"profiles\").select(\"id, full_name, avatar_url, email\").ilike(\"full_name\", `%${q}%`).limit(50)\r\n      return NextResponse.json({ users: data || [] })\r\n    } catch (e) {\r\n      return NextResponse.json({ users: [] })\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,IAAI,aAAa,GAAG,CAAC,QAAQ;IAEnC,sEAAsE;IACtE,IAAI;QACF,MAAM,MAAM,MAAM,IAAA,qJAAe;QACjC,MAAM,WAAgB,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YAAE,SAAS;QAAI;QACpE,MAAM,QAAQ,UAAU,MAAM,SAAS,EAAE;QAEzC,MAAM,WAAW,MACd,MAAM,CAAC,CAAC,IAAW,EAAE,eAAe,EAAE,uBAAuB;SAC7D,MAAM,CAAC,CAAC;YACP,IAAI,CAAC,GAAG,OAAO;YACf,MAAM,QAAQ,EAAE,KAAK,IAAI;YACzB,OAAO,CAAC,EAAE,aAAa,EAAE,aAAa,EAAG,EAAE,WAAW,GAAG,QAAQ,CAAC,EAAE,WAAW,OAAO,MAAM,WAAW,GAAG,QAAQ,CAAC,EAAE,WAAW;QAClI,GACC,KAAK,CAAC,GAAG;QAEZ,uEAAuE;QACvE,MAAM,UAAU,EAAE;QAClB,KAAK,MAAM,KAAK,SAAU;YACxB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,YAAY,MAAM,CAAC,iCAAiC,EAAE,CAAC,MAAM,EAAE,EAAE,EAAE,MAAM;YAClH,QAAQ,IAAI,CAAC;gBAAE,IAAI,EAAE,EAAE;gBAAE,OAAO,EAAE,KAAK;gBAAE,WAAW,SAAS,aAAa,EAAE,aAAa,EAAE,aAAa;gBAAM,YAAY,SAAS,cAAc;YAAK;QACxJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAQ;IAC5C,EAAE,OAAO,KAAK;QACZ,2EAA2E;QAC3E,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,2IAAY;YACnC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,oCAAoC,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC;YAC/H,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,QAAQ,EAAE;YAAC;QAC/C,EAAE,OAAO,GAAG;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,EAAE;YAAC;QACvC;IACF;AACF"}}]
}