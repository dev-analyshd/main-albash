{"version":3,"sources":["../../../../components/swap/swap-dashboard-content.tsx/__nextjs-internal-proxy.mjs","../../../../app/dashboard/swaps/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SwapDashboardContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call SwapDashboardContent() from the server but SwapDashboardContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/swap/swap-dashboard-content.tsx\",\n    \"SwapDashboardContent\",\n);\n","import { redirect } from \"next/navigation\"\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { SwapDashboardContent } from \"@/components/swap/swap-dashboard-content\"\r\n\r\nexport default async function SwapDashboardPage() {\r\n  const supabase = await createClient()\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (!user) {\r\n    redirect(\"/auth/login?redirect=/dashboard/swaps\")\r\n  }\r\n\r\n  // Swaps are now open to all authenticated users\r\n\r\n  // Fetch swaps\r\n  const [sentSwaps, receivedSwaps, activeSwaps] = await Promise.all([\r\n    supabase\r\n      .from(\"swap_requests\")\r\n      .select(\r\n        `\r\n        *,\r\n        initiator:profiles!swap_requests_initiator_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_user:profiles!swap_requests_target_user_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_listing:listings!swap_requests_target_listing_id_fkey(id, title, images, price),\r\n        offering_listing:listings!swap_requests_offering_listing_id_fkey(id, title, images, price)\r\n      `\r\n      )\r\n      .eq(\"initiator_id\", user.id)\r\n      .order(\"created_at\", { ascending: false }),\r\n    supabase\r\n      .from(\"swap_requests\")\r\n      .select(\r\n        `\r\n        *,\r\n        initiator:profiles!swap_requests_initiator_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_user:profiles!swap_requests_target_user_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_listing:listings!swap_requests_target_listing_id_fkey(id, title, images, price),\r\n        offering_listing:listings!swap_requests_offering_listing_id_fkey(id, title, images, price)\r\n      `\r\n      )\r\n      .eq(\"target_user_id\", user.id)\r\n      .order(\"created_at\", { ascending: false }),\r\n    supabase\r\n      .from(\"swap_requests\")\r\n      .select(\r\n        `\r\n        *,\r\n        initiator:profiles!swap_requests_initiator_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_user:profiles!swap_requests_target_user_id_fkey(id, full_name, avatar_url, reputation_score, is_verified),\r\n        target_listing:listings!swap_requests_target_listing_id_fkey(id, title, images, price),\r\n        offering_listing:listings!swap_requests_offering_listing_id_fkey(id, title, images, price)\r\n      `\r\n      )\r\n      .or(`initiator_id.eq.${user.id},target_user_id.eq.${user.id}`)\r\n      .in(\"status\", [\"pending\", \"accepted\"])\r\n      .order(\"created_at\", { ascending: false }),\r\n  ])\r\n\r\n  const allSwaps = [...(sentSwaps.data || []), ...(receivedSwaps.data || [])]\r\n  const completedSwaps = allSwaps.filter((s) => s.status === \"completed\")\r\n  const pendingSwaps = allSwaps.filter((s) => s.status === \"pending\")\r\n\r\n  return (\r\n    <SwapDashboardContent\r\n      sentSwaps={sentSwaps.data || []}\r\n      receivedSwaps={receivedSwaps.data || []}\r\n      activeSwaps={activeSwaps.data || []}\r\n      completedSwaps={completedSwaps}\r\n      pendingSwaps={pendingSwaps}\r\n      userId={user.id}\r\n    />\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"2WAEO,IAAM,EAAuB,CAAA,EAAA,AADpC,EAAA,CAAA,CAAA,QACoC,uBAAA,AAAuB,EACvD,WAAa,MAAM,AAAI,MAAM,sPAAwP,EACrR,2EACA,mFAHG,IAAM,EAAuB,CAAA,EADpC,AACoC,EADpC,CAAA,CAAA,QACoC,uBAAuB,AAAvB,EAChC,WAAa,MAAM,AAAI,MAAM,sPAAwP,EACrR,uDACA,mKCLJ,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CACJ,KAAM,MAAE,CAAI,CAAE,CACf,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAE3B,CAAC,GACH,CAAA,EADS,AACT,EAAA,QAAA,AAAQ,EAAC,yCAMX,GAAM,CAAC,EAAW,EAAe,EAAY,CAAG,MAAM,QAAQ,GAAG,CAAC,CAChE,EACG,IAAI,CAAC,iBACL,MAAM,CACL,CAAC;;;;;;MAMH,CAAC,EAEA,EAAE,CAAC,eAAgB,EAAK,EAAE,EAC1B,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAC1C,EACG,IAAI,CAAC,iBACL,MAAM,CACL,CAAC;;;;;;MAMH,CAAC,EAEA,EAAE,CAAC,iBAAkB,EAAK,EAAE,EAC5B,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAC1C,EACG,IAAI,CAAC,iBACL,MAAM,CACL,CAAC;;;;;;MAMH,CAAC,EAEA,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAK,EAAE,CAAC,mBAAmB,EAAE,EAAK,EAAE,CAAA,CAAE,EAC5D,EAAE,CAAC,SAAU,CAAC,UAAW,WAAW,EACpC,KAAK,CAAC,aAAc,CAAE,UAAW,EAAM,GAC3C,EAEK,EAAW,IAAK,EAAU,IAAI,EAAI,EAAE,IAAO,EAAc,IAAI,EAAI,EAAE,CAAE,CACrE,EAAiB,EAAS,MAAM,CAAC,AAAC,GAAM,AAAa,gBAAX,MAAM,EAChD,EAAe,EAAS,MAAM,CAAC,AAAC,GAAmB,YAAb,EAAE,MAAM,EAEpD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CACnB,UAAW,EAAU,IAAI,EAAI,EAAE,CAC/B,cAAe,EAAc,IAAI,EAAI,EAAE,CACvC,YAAa,EAAY,IAAI,EAAI,EAAE,CACnC,eAAgB,EAChB,aAAc,EACd,OAAQ,EAAK,EAAE,EAGrB","ignoreList":[0]}