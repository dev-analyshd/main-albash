module.exports=[606406,a=>{"use strict";var b=a.i(234157);a.s(["CheckIcon",()=>b.default])},3688,a=>{"use strict";var b=a.i(572131),c=a.i(872752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},234157,a=>{"use strict";let b=(0,a.i(170106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},404650,a=>{"use strict";let b=(0,a.i(170106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b])},596221,a=>{"use strict";var b=a.i(404650);a.s(["Loader2",()=>b.default])},895174,a=>{"use strict";let b=(0,a.i(170106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},292e3,a=>{"use strict";var b=a.i(895174);a.s(["AlertCircle",()=>b.default])},265602,a=>{"use strict";var b=a.i(187924),c=a.i(400187),d=a.i(497895);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g])},137681,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);a.s(["default",()=>b])},585668,a=>{"use strict";var b=a.i(137681);a.s(["ArrowDown",()=>b.default])},571936,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(340695),e=a.i(703130),f=a.i(965733),g=a.i(205522),h=a.i(917171),i=a.i(265602),j=a.i(254161),k=a.i(887682),l=a.i(596221),m=a.i(585668),n=a.i(292e3);function o(){let[a,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)({amount:"",paymentMethodId:""}),D=async()=>{try{s(!0);let a=await fetch("/api/payments/withdraw");if(a.ok){let b=await a.json();o(b.withdrawals||[])}let b=await fetch("/api/payments/methods");if(b.ok){let a=await b.json();q(a.methods||[])}let c=await fetch("/api/profile");if(c.ok){let a=await c.json();A(a.wallet_balance||0)}}catch(a){console.error("Failed to load data:",a)}finally{s(!1)}};(0,c.useEffect)(()=>{D()},[]);let E=async a=>{a.preventDefault();let b=parseFloat(B.amount);if(!b||b<=0)return void u("Please enter a valid amount");if(b>z)return void u("Insufficient balance");if(!B.paymentMethodId)return void u("Please select a payment method");y(!0),u("");try{let a=await fetch("/api/payments/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:b,payment_method_id:B.paymentMethodId})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to request withdrawal")}await D(),w(!1),C({amount:"",paymentMethodId:""})}catch(a){u(a.message||"Failed to request withdrawal"),console.error(a)}finally{y(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[t&&(0,b.jsxs)(i.Alert,{variant:"destructive",children:[(0,b.jsx)(n.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(i.AlertDescription,{children:t})]}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Available Balance"}),(0,b.jsxs)("p",{className:"text-4xl font-bold",children:["$",z.toFixed(2)]})]}),(0,b.jsxs)(f.Dialog,{open:v,onOpenChange:w,children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{size:"lg",className:"gap-2",children:[(0,b.jsx)(m.ArrowDown,{className:"h-4 w-4"}),"Request Withdrawal"]})}),(0,b.jsxs)(f.DialogContent,{children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Request Withdrawal"}),(0,b.jsx)(f.DialogDescription,{children:"Withdraw funds from your account to your payment method"})]}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-2.5 text-muted-foreground",children:"$"}),(0,b.jsx)(g.Input,{id:"amount",type:"number",placeholder:"0.00",step:"0.01",min:"0",max:z,value:B.amount,onChange:a=>C({...B,amount:a.target.value}),className:"pl-7"})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Max: $",z.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"method",children:"Payment Method"}),(0,b.jsxs)(k.Select,{value:B.paymentMethodId,onValueChange:a=>C({...B,paymentMethodId:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"method",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select payment method"})}),(0,b.jsx)(k.SelectContent,{children:p.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.label||a.type," ",a.last_four&&`(****${a.last_four})`]},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>w(!1),disabled:x,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",className:"flex-1",disabled:x||0===p.length,children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin mr-2"}),"Requesting..."]}):"Request Withdrawal"})]})]})]})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Withdrawal History"}),r?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})}):a.length>0?(0,b.jsx)("div",{className:"grid gap-4",children:a.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,b.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,b.jsx)(m.ArrowDown,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-medium",children:["$",a.amount.toFixed(2)," ",a.currency]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()})]})]}),(a=>{switch(a){case"completed":return(0,b.jsx)(j.Badge,{className:"bg-green-600",children:"Completed"});case"processing":return(0,b.jsx)(j.Badge,{className:"bg-blue-600",children:"Processing"});case"pending":return(0,b.jsx)(j.Badge,{className:"bg-yellow-600",children:"Pending"});case"failed":return(0,b.jsx)(j.Badge,{variant:"destructive",children:"Failed"});default:return(0,b.jsx)(j.Badge,{children:a})}})(a.status)]})},a.id))}):(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-8 text-center text-muted-foreground",children:"No withdrawals yet"})})]})]})}function p(){return(0,b.jsxs)("div",{className:"container max-w-4xl py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Request Withdrawal"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Withdraw your earnings to your registered payment method"})]}),(0,b.jsx)(o,{})]})}a.s(["default",()=>p],571936)}];

//# sourceMappingURL=_1fac3dcd._.js.map