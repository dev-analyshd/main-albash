module.exports=[439288,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(346271),f=a.i(919256),g=a.i(596221),h=a.i(292e3),i=a.i(340695),j=a.i(703130),k=a.i(205522),l=a.i(917171),m=a.i(546893),n=a.i(887682),o=a.i(265602),p=a.i(269240);function q({targetListing:a,targetUserId:q,onClose:r}){let s=(0,d.useRouter)(),t=(0,p.createClient)(),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({swap_mode:"contract_based",offering_type:"product",offering_listing_id:"",offering_description:"",offering_value:"",requesting_type:a?.listing_type||"product",requesting_description:a?.description||"",requesting_value:a?.price?.toString()||"",price_difference:"",contract_duration_days:"",ownership_transfer_type:"full",usage_rights:"",upgrade_expectations:""});(0,c.useEffect)(()=>{(async()=>{let{data:{user:a}}=await t.auth.getUser();if(a){let{data:b}=await t.from("listings").select("*").eq("user_id",a.id);z(b||[])}})()},[]);let G=async b=>{b.preventDefault(),v(!0),x(null);try{let b=await fetch("/api/swaps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_listing_id:a?.id||null,target_user_id:q||a?.user_id,swap_mode:E.swap_mode,offering_type:E.offering_type,offering_listing_id:E.offering_listing_id||null,offering_description:E.offering_description,offering_value:E.offering_value?parseFloat(E.offering_value):null,requesting_type:E.requesting_type,requesting_description:E.requesting_description,requesting_value:E.requesting_value?parseFloat(E.requesting_value):null,price_difference:E.price_difference?parseFloat(E.price_difference):null,contract_duration_days:E.contract_duration_days?parseInt(E.contract_duration_days):null,ownership_transfer_type:E.ownership_transfer_type,usage_rights:E.usage_rights||null,upgrade_expectations:E.upgrade_expectations||null})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to create swap proposal");s.push(`/swap-center/${c.data.id}`),s.refresh(),r&&r()}catch(a){x(a.message)}finally{v(!1)}};return(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-primary/10",children:(0,b.jsx)(f.ArrowLeftRight,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Propose Swap"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Create a value exchange proposal"})]})]}),w&&(0,b.jsxs)(o.Alert,{variant:"destructive",children:[(0,b.jsx)(h.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(o.AlertDescription,{children:w})]}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Swap Type"}),(0,b.jsx)(j.CardDescription,{children:"Choose how you want to exchange value"})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)(n.Select,{value:E.swap_mode,onValueChange:a=>F({...E,swap_mode:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"direct_swap",children:"Direct Swap (1:1 exchange)"}),(0,b.jsx)(n.SelectItem,{value:"value_difference",children:"Value Difference (with payment)"}),(0,b.jsx)(n.SelectItem,{value:"contract_based",children:"Contract Based (custom terms)"}),(0,b.jsx)(n.SelectItem,{value:"time_based",children:"Time Based (future delivery)"}),(0,b.jsx)(n.SelectItem,{value:"equity_based",children:"Equity Based (ownership share)"}),(0,b.jsx)(n.SelectItem,{value:"license_based",children:"License Based (usage rights)"}),(0,b.jsx)(n.SelectItem,{value:"upgrade_path",children:"Upgrade Path (idea â†’ product)"})]})]})})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"What You're Offering"}),(0,b.jsx)(j.CardDescription,{children:"Describe what you want to swap"})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Offering Type"}),(0,b.jsxs)(n.Select,{value:E.offering_type,onValueChange:a=>F({...E,offering_type:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"idea",children:"Idea"}),(0,b.jsx)(n.SelectItem,{value:"talent",children:"Talent"}),(0,b.jsx)(n.SelectItem,{value:"skill",children:"Skill"}),(0,b.jsx)(n.SelectItem,{value:"product",children:"Product"}),(0,b.jsx)(n.SelectItem,{value:"service",children:"Service"}),(0,b.jsx)(n.SelectItem,{value:"asset",children:"Asset"}),(0,b.jsx)(n.SelectItem,{value:"nft",children:"NFT"}),(0,b.jsx)(n.SelectItem,{value:"equity",children:"Equity"})]})]})]}),y.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Link to Your Listing (Optional)"}),(0,b.jsxs)(n.Select,{value:E.offering_listing_id,onValueChange:a=>F({...E,offering_listing_id:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Select a listing"})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"",children:"None - Custom Offering"}),y.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.title},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Description *"}),(0,b.jsx)(m.Textarea,{value:E.offering_description,onChange:a=>F({...E,offering_description:a.target.value}),placeholder:"Describe what you're offering in detail...",required:!0,rows:4})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Estimated Value (Optional)"}),(0,b.jsx)(k.Input,{type:"number",value:E.offering_value,onChange:a=>F({...E,offering_value:a.target.value}),placeholder:"0.00"})]})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"What You Want"}),(0,b.jsx)(j.CardDescription,{children:"What you're requesting in exchange"})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[a&&(0,b.jsxs)("div",{className:"p-4 bg-secondary/30 rounded-lg",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),a.price&&(0,b.jsxs)("p",{className:"text-sm font-medium mt-2",children:["$",a.price]})]}),!a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Requesting Type"}),(0,b.jsxs)(n.Select,{value:E.requesting_type,onValueChange:a=>F({...E,requesting_type:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"idea",children:"Idea"}),(0,b.jsx)(n.SelectItem,{value:"talent",children:"Talent"}),(0,b.jsx)(n.SelectItem,{value:"skill",children:"Skill"}),(0,b.jsx)(n.SelectItem,{value:"product",children:"Product"}),(0,b.jsx)(n.SelectItem,{value:"service",children:"Service"}),(0,b.jsx)(n.SelectItem,{value:"asset",children:"Asset"}),(0,b.jsx)(n.SelectItem,{value:"nft",children:"NFT"}),(0,b.jsx)(n.SelectItem,{value:"equity",children:"Equity"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Description *"}),(0,b.jsx)(m.Textarea,{value:E.requesting_description,onChange:a=>F({...E,requesting_description:a.target.value}),placeholder:"Describe what you want...",required:!0,rows:4})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Estimated Value (Optional)"}),(0,b.jsx)(k.Input,{type:"number",value:E.requesting_value,onChange:a=>F({...E,requesting_value:a.target.value}),placeholder:"0.00"})]})]})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Swap Terms"}),(0,b.jsx)(j.CardDescription,{children:"Additional details for the swap agreement"})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:["value_difference"===E.swap_mode&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Price Difference (if any)"}),(0,b.jsx)(k.Input,{type:"number",value:E.price_difference,onChange:a=>F({...E,price_difference:a.target.value}),placeholder:"0.00"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Amount to be paid in addition to the swap (positive = you pay, negative = they pay)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Ownership Transfer Type"}),(0,b.jsxs)(n.Select,{value:E.ownership_transfer_type,onValueChange:a=>F({...E,ownership_transfer_type:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"full",children:"Full Ownership"}),(0,b.jsx)(n.SelectItem,{value:"partial",children:"Partial Ownership"}),(0,b.jsx)(n.SelectItem,{value:"license",children:"License/Usage Rights"}),(0,b.jsx)(n.SelectItem,{value:"lease",children:"Lease/Temporary"})]})]})]}),"time_based"===E.swap_mode&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Contract Duration (Days)"}),(0,b.jsx)(k.Input,{type:"number",value:E.contract_duration_days,onChange:a=>F({...E,contract_duration_days:a.target.value}),placeholder:"30"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Usage Rights (Optional)"}),(0,b.jsx)(m.Textarea,{value:E.usage_rights,onChange:a=>F({...E,usage_rights:a.target.value}),placeholder:"Describe any usage rights or restrictions...",rows:3})]}),"upgrade_path"===E.swap_mode&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Upgrade Expectations"}),(0,b.jsx)(m.Textarea,{value:E.upgrade_expectations,onChange:a=>F({...E,upgrade_expectations:a.target.value}),placeholder:"Describe how the idea will be transformed into a product...",rows:3})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[r&&(0,b.jsx)(i.Button,{type:"button",variant:"outline",onClick:r,disabled:u,children:"Cancel"}),(0,b.jsxs)(i.Button,{type:"submit",disabled:u,children:[u&&(0,b.jsx)(g.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Propose Swap"]})]})]})]})}a.s(["SwapProposalForm",()=>q])}];

//# sourceMappingURL=components_swap_swap-proposal-form_tsx_898837ea._.js.map