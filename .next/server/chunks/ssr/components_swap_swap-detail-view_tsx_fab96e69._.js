module.exports=[969542,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(919256),f=a.i(816201),g=a.i(862722),h=a.i(641710),i=a.i(546842),j=a.i(596221),k=a.i(340695),l=a.i(703130),m=a.i(254161),n=a.i(807706),o=a.i(621958),p=a.i(965733),q=a.i(546893),r=a.i(269240),s=a.i(238246);function t({swap:a,currentUserId:t}){let u=(0,d.useRouter)();(0,r.createClient)();let[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)({type:"",open:!1}),[z,A]=(0,c.useState)(""),B=a.initiator_id===t;B?a.target_user:a.initiator;let C=async b=>{w(!0);try{let c={action:b};"reject"===b&&z&&(c.reason=z);let d=await fetch(`/api/swaps/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){let a=await d.json();throw Error(a.error||"Failed to process action")}u.refresh(),y({type:"",open:!1})}catch(a){console.error("Action error:",a),alert(a.message)}finally{w(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.default,{href:"/swap-center",children:(0,b.jsx)(k.Button,{variant:"ghost",size:"icon",children:"â†"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Swap Details"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and manage swap proposal"})]})]}),(0,b.jsx)(m.Badge,{variant:"outline",className:"pending"===a.status?"bg-yellow-500/10 text-yellow-600":"accepted"===a.status?"bg-green-500/10 text-green-600":"completed"===a.status?"bg-blue-500/10 text-blue-600":"bg-gray-500/10 text-gray-600",children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Swap Overview"})}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(i.User,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"You're Offering"})]}),a.offering_listing?(0,b.jsx)(s.default,{href:`/marketplace/listing/${a.offering_listing.id}`,children:(0,b.jsx)(l.Card,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:(0,b.jsxs)(l.CardContent,{className:"p-4",children:[(0,b.jsx)("p",{className:"font-semibold",children:a.offering_listing.title}),a.offering_listing.images?.[0]&&(0,b.jsx)("img",{src:a.offering_listing.images[0],alt:a.offering_listing.title,className:"w-full h-32 object-cover rounded-lg mt-2"}),a.offering_value&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Value: $",a.offering_value]})]})})}):(0,b.jsxs)("div",{className:"p-4 bg-secondary/30 rounded-lg",children:[(0,b.jsx)("p",{className:"font-medium",children:a.offering_description}),a.offering_value&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Value: $",a.offering_value]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(e.ArrowLeftRight,{className:"h-4 w-4 text-primary"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"You're Requesting"})]}),a.target_listing?(0,b.jsx)(s.default,{href:`/marketplace/listing/${a.target_listing.id}`,children:(0,b.jsx)(l.Card,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:(0,b.jsxs)(l.CardContent,{className:"p-4",children:[(0,b.jsx)("p",{className:"font-semibold",children:a.target_listing.title}),a.target_listing.images?.[0]&&(0,b.jsx)("img",{src:a.target_listing.images[0],alt:a.target_listing.title,className:"w-full h-32 object-cover rounded-lg mt-2"}),a.requesting_value&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Value: $",a.requesting_value]})]})})}):(0,b.jsxs)("div",{className:"p-4 bg-secondary/30 rounded-lg",children:[(0,b.jsx)("p",{className:"font-medium",children:a.requesting_description}),a.requesting_value&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Value: $",a.requesting_value]})]})]})]}),a.price_difference&&0!==a.price_difference&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-secondary/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Price Difference"}),(0,b.jsxs)("span",{className:`font-semibold ${a.price_difference>0?"text-green-600":"text-red-600"}`,children:[a.price_difference>0?"+":"","$",a.price_difference]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.price_difference>0?"You pay this amount":"You receive this amount"})]})]})]}),(0,b.jsxs)(o.Tabs,{defaultValue:"terms",children:[(0,b.jsxs)(o.TabsList,{children:[(0,b.jsx)(o.TabsTrigger,{value:"terms",children:"Terms"}),(0,b.jsx)(o.TabsTrigger,{value:"parties",children:"Parties"}),(0,b.jsx)(o.TabsTrigger,{value:"timeline",children:"Timeline"})]}),(0,b.jsx)(o.TabsContent,{value:"terms",className:"space-y-4",children:(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Swap Terms"})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Swap Mode"}),(0,b.jsx)("p",{className:"font-medium",children:a.swap_mode.replace("_"," ")})]}),a.ownership_transfer_type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Ownership Transfer"}),(0,b.jsx)("p",{className:"font-medium",children:a.ownership_transfer_type})]}),a.usage_rights&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Usage Rights"}),(0,b.jsx)("p",{className:"font-medium",children:a.usage_rights})]}),a.contract_duration_days&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Contract Duration"}),(0,b.jsxs)("p",{className:"font-medium",children:[a.contract_duration_days," days"]})]})]})]})}),(0,b.jsx)(o.TabsContent,{value:"parties",className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Initiator"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(n.Avatar,{className:"h-12 w-12",children:[(0,b.jsx)(n.AvatarImage,{src:a.initiator?.avatar_url||void 0}),(0,b.jsx)(n.AvatarFallback,{children:(a.initiator?.full_name||"U")[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.initiator?.full_name||"User"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.initiator?.reputation_score||0," reputation"]})]})]})})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Target User"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(n.Avatar,{className:"h-12 w-12",children:[(0,b.jsx)(n.AvatarImage,{src:a.target_user?.avatar_url||void 0}),(0,b.jsx)(n.AvatarFallback,{children:(a.target_user?.full_name||"U")[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.target_user?.full_name||"User"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.target_user?.reputation_score||0," reputation"]})]})]})})]})]})}),(0,b.jsx)(o.TabsContent,{value:"timeline",className:"space-y-4",children:(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Timeline"})}),(0,b.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Created"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleString()})]})]}),a.accepted_at&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Accepted"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.accepted_at).toLocaleString()})]})]}),a.completed_at&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.CheckCircle,{className:"h-4 w-4 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Completed"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.completed_at).toLocaleString()})]})]})]})]})})]}),"pending"===a.status&&!B&&(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Actions"}),(0,b.jsx)(l.CardDescription,{children:"Accept or reject this swap proposal"})]}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(k.Button,{onClick:()=>C("accept"),disabled:v,className:"flex-1",children:[v?(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(f.CheckCircle,{className:"mr-2 h-4 w-4"}),"Accept Swap"]}),(0,b.jsxs)(k.Button,{variant:"destructive",onClick:()=>y({type:"reject",open:!0}),disabled:v,className:"flex-1",children:[(0,b.jsx)(g.XCircle,{className:"mr-2 h-4 w-4"}),"Reject"]})]})})]}),"accepted"===a.status&&(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Next Steps"}),(0,b.jsx)(l.CardDescription,{children:"Complete the swap execution"})]}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)(k.Button,{onClick:()=>C("complete"),disabled:v,className:"w-full",children:[v?(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(f.CheckCircle,{className:"mr-2 h-4 w-4"}),"Mark as Completed"]})})]}),(0,b.jsx)(p.Dialog,{open:x.open&&"reject"===x.type,onOpenChange:a=>y({type:"",open:a}),children:(0,b.jsxs)(p.DialogContent,{children:[(0,b.jsxs)(p.DialogHeader,{children:[(0,b.jsx)(p.DialogTitle,{children:"Reject Swap Proposal"}),(0,b.jsx)(p.DialogDescription,{children:"Provide a reason for rejecting this swap (optional)"})]}),(0,b.jsx)(q.Textarea,{value:z,onChange:a=>A(a.target.value),placeholder:"Reason for rejection...",rows:4}),(0,b.jsxs)(p.DialogFooter,{children:[(0,b.jsx)(k.Button,{variant:"outline",onClick:()=>y({type:"",open:!1}),children:"Cancel"}),(0,b.jsxs)(k.Button,{variant:"destructive",onClick:()=>C("reject"),disabled:v,children:[v?(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Reject Swap"]})]})]})})]})}a.s(["SwapDetailView",()=>t])}];

//# sourceMappingURL=components_swap_swap-detail-view_tsx_fab96e69._.js.map